---
title: "File Combination and For loops"
author: "Michael Puerto"
date: "11/16/2020"
output: html_document
---

First we need to read in the data, at least one file, to see what it looks like



```{r}
if (!require(pacman)) install.packages("pacman") 
pacman::p_load(tidyverse,readr)

# Don't forget, this is my own directory, we need to change this later to work with the data directly from github if possible


one_file = read_csv("C:/Users/macia/Documents/MSIA-19/Git/Green_Hackathon-Fall2020/data/Analysis/Baseball_results.csv")

glimpse(one_file)

```

Ok so each file format should be the same. The only thing that is missing "building name". I think at first, I'll just try to combine all the files using a for loop.

After that is working, adjust the forloop to add the file name. If you notice, they way the file names are formated .. __*building name*_reults.csv__




```{r, message=FALSE, warning=FALSE,error=FALSE}

# Don't forget, this is my own directory, we need to change this later to work with the data directly from github if possible
#
directory = "C:/Users/macia/Documents/MSIA-19/Git/Green_Hackathon-Fall2020/data/Analysis/"
file_names <- dir(directory) # get file names of the directory

data = NULL # to store the results of our data late

for (i in file_names){ # for each file in the directory (i)
  local_path = paste(directory, i, sep = "") # "glue"/paste the directory and file name
  data_temp = read_csv(local_path) # read in thee data
  data_temp['building'] = i # create a new variable in the data of the file name -> since this contains building name
  # this "building name" would read baseball_results.csv 
  data_temp['building'] = sub("_.*","",data_temp$building) # I replace _results.csv with "" (empty) leaving only the building name left
  data = bind_rows(data,data_temp) # bind results to dataframe outside of the loop. 
}

#write.csv(data,"combined_results.csv") # this will write the csv. 


```


Now let's take a look :)


```{r}
glimpse(data)
```

Now we have 3.6 million observations! 

How many data points in each building?

```{r}

data %>% group_by(building) %>% count(sort = T)

```

Next thing I could do is parse the dates, for month, day, week, etc...


